<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <!-- CSP –¥–ª—è Cordova -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; script-src 'self' https://cdn.tailwindcss.com 'unsafe-inline' 'unsafe-eval'; media-src *; img-src 'self' data: content:; font-src 'self' https://fonts.gstatic.com data:;">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä-–¢—Ä–µ–Ω–∞–∂–µ—Ä</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Nunito', sans-serif; background: #f0f9ff; }
        .main-container { max-width: 900px; margin: 2rem auto; padding: 1.5rem; background: white; border-radius: 24px; box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); }
        .mode-button, .module-button { transition: all 0.3s ease; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border: none; }
        .mode-button:hover, .module-button:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1); }
        .card { perspective: 1000px; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .card.is-flipped .card-inner { transform: rotateY(180deg); }
        .card-face { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; flex-direction: column; border-radius: 16px; text-align: center; padding: 1rem; }
        .card-front { background: linear-gradient(135deg, #60a5fa, #3b82f6); color: white; }
        .card-back { background: linear-gradient(135deg, #a78bfa, #8b5cf6); color: white; transform: rotateY(180deg); }
        .clock { position: relative; width: 250px; height: 250px; border: 10px solid #3b82f6; border-radius: 50%; margin: 0 auto; background-color: #fff; }
        .hand { position: absolute; left: 50%; bottom: 50%; background-color: #1e3a8a; transform-origin: bottom; border-radius: 10px; }
        .hour-hand { width: 6px; height: 65px; transform: translateX(-50%); }
        .minute-hand { width: 4px; height: 100px; transform: translateX(-50%); background-color: #3b82f6; }
        .center-dot { position: absolute; top: 50%; left: 50%; width: 12px; height: 12px; background: #ef4444; border-radius: 50%; transform: translate(-50%, -50%); z-index: 10; }
        .season-wheel { position: relative; width: 320px; height: 320px; }
        .month { position: absolute; width: 80px; height: 80px; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: 700; cursor: pointer; transition: all 0.2s ease; user-select: none; }
        .month:hover { transform: scale(1.1); box-shadow: 0 0 15px rgba(0,0,0,0.2); }
    </style>
</head>
<body class="text-gray-800">

    <div class="main-container">
        <!-- Top Level Menu -->
        <div id="top-level-menu">
            <h1 class="text-4xl md:text-5xl font-extrabold text-center text-gray-800 mb-4">–°—É–ø–µ—Ä-—Ç—Ä–µ–Ω–∞–∂–µ—Ä</h1>
            <p class="text-center text-gray-500 mb-8">–ü—Ä–µ–≤—Ä–∞—Ç–∏–º —Å–∫—É—á–Ω—É—é –∑—É–±—Ä–µ–∂–∫—É –≤ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!</p>
            <div class="bg-sky-50 border-2 border-dashed border-sky-200 rounded-2xl p-6 mb-10">
                <h2 class="text-2xl font-bold text-sky-800 text-center mb-4">–ù–∞—à–∞ –º–µ—Ç–æ–¥–∏–∫–∞ –¥–ª—è 100% —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</h2>
                <ul class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sky-900">
                    <li class="flex items-start"><span class="text-sky-500 mr-2">‚úì</span> <strong>–ê—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ –∏ —Å—Ç–∏—Ö–∏:</strong> –°–æ–∑–¥–∞–µ–º —è—Ä–∫–∏–µ –æ–±—Ä–∞–∑—ã –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è.</li>
                    <li class="flex items-start"><span class="text-sky-500 mr-2">‚úì</span> <strong>–û–±—Ä–∞—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏:</strong> –£—á–∏–º –¥—É–º–∞—Ç—å –∫–∞–∫ –º–∞—Ç–µ–º–∞—Ç–∏–∫, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.</li>
                    <li class="flex items-start"><span class="text-sky-500 mr-2">‚úì</span> <strong>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤:</strong> –ù–∞–≥–ª—è–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —É–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ.</li>
                    <li class="flex items-start"><span class="text-sky-500 mr-2">‚úì</span> <strong>–ü–æ–∏—Å–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:</strong> –†–∞–∑–≤–∏–≤–∞–µ–º –ª–æ–≥–∏–∫—É –∏ –∏–Ω—Ç—É–∏—Ü–∏—é —Å –ø–æ–º–æ—â—å—é —Ç–∞–±–ª–∏—Ü—ã –ü–∏—Ñ–∞–≥–æ—Ä–∞.</li>
                    <li class="flex items-start"><span class="text-sky-500 mr-2">‚úì</span> <strong>–ò–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç:</strong> –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –∑–Ω–∞–Ω–∏–π –≤ –∞–∑–∞—Ä—Ç–Ω–æ–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ.</li>
                </ul>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                 <button onclick="showSubMenu('multiplication')" class="module-button p-6 bg-blue-500 text-white rounded-2xl flex flex-col items-center justify-center">
                    <span class="text-5xl mb-2">üî¢</span><h3 class="text-2xl font-bold">–ú–∞—Å—Ç–µ—Ä –£–º–Ω–æ–∂–µ–Ω–∏—è</h3>
                </button>
                 <button onclick="showSubMenu('time')" class="module-button p-6 bg-teal-500 text-white rounded-2xl flex flex-col items-center justify-center">
                    <span class="text-5xl mb-2">‚è∞</span><h3 class="text-2xl font-bold">–ü–æ–≤–µ–ª–∏—Ç–µ–ª—å –í—Ä–µ–º–µ–Ω–∏</h3>
                </button>
                 <button onclick="showSubMenu('calendar')" class="module-button p-6 bg-lime-600 text-white rounded-2xl flex flex-col items-center justify-center">
                    <span class="text-5xl mb-2">üìÖ</span><h3 class="text-2xl font-bold">–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ü—Ä–∏—Ä–æ–¥—ã</h3>
                </button>
            </div>
        </div>

        <!-- Sub-Menus Containers -->
        <div id="multiplication-menu" class="hidden"></div>
        <div id="time-menu" class="hidden"></div>
        <div id="calendar-menu" class="hidden"></div>

        <!-- Mode Content Container -->
        <div id="mode-container" class="hidden"></div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç Cordova –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω –ø–µ—Ä–µ–¥ –≤–∞—à–∏–º –æ—Å–Ω–æ–≤–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º -->
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript">
        // –û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è deviceready –æ—Ç Cordova
        document.addEventListener('deviceready', onDeviceReady, false);

        function onDeviceReady() {
            // Cordova –≥–æ—Ç–æ–≤–∞. –ú–æ–∂–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
            // –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∏–∂–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Å–∞–º.
            // –ï—Å–ª–∏ –±—ã —É –≤–∞—Å –±—ã–ª–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –¥–ª—è Cordova –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –æ–Ω–∞ –±—ã–ª–∞ –±—ã –∑–¥–µ—Å—å.
            console.log('Cordova device is ready!');
        }

        // --- GLOBAL STATE & NAVIGATION ---
        const topLevelMenu = document.getElementById('top-level-menu');
        const multiplicationMenu = document.getElementById('multiplication-menu');
        const timeMenu = document.getElementById('time-menu');
        const calendarMenu = document.getElementById('calendar-menu');
        const modeContainer = document.getElementById('mode-container');

        let state = { currentModule: null, currentMode: null, isPremium: false };
        let sprintState = {};
        let examState = {};
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–ª–∞—Ç–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É
        function isPremiumContent(num1, num2) {
            return (num1 > 3 || num2 > 3) && !state.isPremium;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ø—Ä–µ–º–∏—É–º-–≤–µ—Ä—Å–∏–∏
        function purchasePremium() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
            state.isPremium = true;
            alert('–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–∏–æ–±—Ä–µ–ª–∏ –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!');
            
            // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º, –µ—Å–ª–∏ –æ–Ω –∞–∫—Ç–∏–≤–µ–Ω
            if (state.currentMode) {
                const initFunction = modeInitializers[state.currentMode];
                if (initFunction) initFunction();
            } else if (state.currentModule) {
                // –ï—Å–ª–∏ –º—ã –≤ –º–µ–Ω—é –º–æ–¥—É–ª—è, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –µ–≥–æ
                renderSubMenu(state.currentModule);
            }
            
            // –°–∫—Ä—ã–≤–∞–µ–º –±–∞–Ω–Ω–µ—Ä –ø—Ä–µ–º–∏—É–º, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
            const premiumBanner = document.getElementById('premium-banner');
            if (premiumBanner) premiumBanner.classList.add('hidden');
        }

        function showTopMenu() {
            [multiplicationMenu, timeMenu, calendarMenu, modeContainer].forEach(el => el.classList.add('hidden'));
            topLevelMenu.classList.remove('hidden');
            state.currentModule = null; state.currentMode = null;
            if (sprintState.timerId) clearInterval(sprintState.timerId);
        }

        function showSubMenu(module) {
            state.currentModule = module;
            [topLevelMenu, modeContainer].forEach(el => el.classList.add('hidden'));
            const menus = { 'multiplication': multiplicationMenu, 'time': timeMenu, 'calendar': calendarMenu };
            Object.values(menus).forEach(m => m.classList.add('hidden'));
            menus[module].classList.remove('hidden');
            renderSubMenu(module);
        }

        function startMode(modeId) {
            state.currentMode = modeId;
            [multiplicationMenu, timeMenu, calendarMenu].forEach(el => el.classList.add('hidden'));
            modeContainer.classList.remove('hidden');

            modeContainer.innerHTML = `<button onclick="showSubMenu(state.currentModule)" class="mb-6 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 font-semibold">‚Äπ –ù–∞–∑–∞–¥</button>`;
            const contentDiv = document.createElement('div');
            contentDiv.id = `${modeId}-mode`;
            modeContainer.appendChild(contentDiv);

            const initFunction = modeInitializers[modeId];
            if (initFunction) initFunction();
        }

        // --- RENDER SUB-MENUS ---
        function renderSubMenu(module) {
            const menusData = {
                'multiplication': {
                    title: "–ú–∞—Å—Ç–µ—Ä –£–º–Ω–æ–∂–µ–Ω–∏—è", color: "blue", buttons: [
                        { id: 'cards', text: '–ö–∞—Ä—Ç–æ—á–∫–∏ —Å–æ —Å—Ç–∏—Ö–∞–º–∏' }, { id: 'visualizer', text: '–í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä' },
                        { id: 'pythagoras', text: '–¢–∞–±–ª–∏—Ü–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞' }, { id: 'factors', text: '–ù–∞–π–¥–∏ –º–Ω–æ–∂–∏—Ç–µ–ª–∏', premium: true },
                        { id: 'sprint', text: '–°–ø—Ä–∏–Ω—Ç –Ω–∞ –≤—Ä–µ–º—è', premium: true }, { id: 'exam', text: '–§–∏–Ω–∞–ª—å–Ω—ã–π –≠–∫–∑–∞–º–µ–Ω', premium: true }
                    ]
                },
                'time': {
                    title: "–ü–æ–≤–µ–ª–∏—Ç–µ–ª—å –í—Ä–µ–º–µ–Ω–∏", color: "teal", buttons: [
                        { id: 'interactive-clock', text: '–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ß–∞—Å—ã' }, { id: 'time-of-day', text: '–í—Ä–µ–º—è –°—É—Ç–æ–∫' },
                        { id: 'what-time', text: '–¢—Ä–µ–Ω–∞–∂–µ—Ä "–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å?"' }, { id: 'word-magic', text: '–ú–∞–≥–∏—è –°–ª–æ–≤', full: true }
                    ]
                },
                'calendar': {
                    title: "–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ü—Ä–∏—Ä–æ–¥—ã", color: "lime", buttons: [
                        { id: 'seasons', text: '–í—Ä–µ–º–µ–Ω–∞ –ì–æ–¥–∞ –∏ –ú–µ—Å—è—Ü—ã', full: true }
                    ]
                }
            };
            const data = menusData[module];
            const container = document.getElementById(`${module}-menu`);
            container.innerHTML = `
                <button onclick="showTopMenu()" class="mb-6 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 font-semibold">‚Äπ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
                <h2 class="text-3xl font-bold text-center text-${data.color}-600 mb-6">${data.title}</h2>
                ${!state.isPremium ? `
                <div id="premium-banner" class="bg-amber-100 border-2 border-amber-300 p-4 rounded-xl mb-6">
                    <p class="text-center text-amber-800 mb-2"><strong>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è:</strong> –¢–∞–±–ª–∏—Ü–∞ —É–º–Ω–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–æ 3!</p>
                    <div class="text-center">
                        <button onclick="purchasePremium()" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-bold">
                            –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é
                        </button>
                    </div>
                </div>` : ''}
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    ${data.buttons.map(btn => `
                        <button
                            onclick="${btn.premium && !state.isPremium ? 'purchasePremium()' : `startMode('${btn.id}')`}"
                            class="mode-button p-6 text-xl text-center ${btn.premium && !state.isPremium ? 'bg-gray-400' : `bg-${btn.color || data.color}-500`} text-white rounded-2xl ${btn.full ? 'md:col-span-2' : ''} relative overflow-hidden"
                        >
                            ${btn.text}
                            ${btn.premium && !state.isPremium ? '<span class="absolute top-1 right-2 text-xs bg-amber-500 text-white px-2 py-1 rounded-full">PRO</span>' : ''}
                        </button>
                    `).join('')}
                </div>`;
        }

        // --- DATA ---
        const rhymes = { "1x1": "–û–¥–∏–Ω –Ω–∞ –æ–¥–∏–Ω - –≤—Å–µ–≥–¥–∞ –≥–æ—Å–ø–æ–¥–∏–Ω!", "1x2": "–û–¥–∏–Ω –Ω–∞ –¥–≤–∞ - –µ–¥–≤–∞-–µ–¥–≤–∞.", "1x3": "–û–¥–∏–Ω –Ω–∞ —Ç—Ä–∏ - –ø–æ—Å–º–æ—Ç—Ä–∏.", "1x4": "–û–¥–∏–Ω –Ω–∞ —á–µ—Ç—ã—Ä–µ - –Ω–µ—Ç –≤ —Ü–µ–ª–æ–º –º–∏—Ä–µ.", "1x5": "–û–¥–∏–Ω –Ω–∞ –ø—è—Ç—å - –ª–µ–≥–∫–æ —Å—á–∏—Ç–∞—Ç—å.", "1x6": "–û–¥–∏–Ω –Ω–∞ —à–µ—Å—Ç—å - —Ç–∞–∫ –∏ –µ—Å—Ç—å.", "1x7": "–û–¥–∏–Ω –Ω–∞ —Å–µ–º—å - –ø–æ–Ω—è—Ç–Ω–æ –≤—Å–µ–º.", "1x8": "–û–¥–∏–Ω –Ω–∞ –≤–æ—Å–µ–º—å - –º—ã —Ç–µ–±—è –ø–æ–ø—Ä–æ—Å–∏–º.", "1x9": "–û–¥–∏–Ω –Ω–∞ –¥–µ–≤—è—Ç—å - –Ω–µ—á–µ–≥–æ –¥–µ–ª–∞—Ç—å.", "1x10": "–û–¥–∏–Ω –Ω–∞ –¥–µ—Å—è—Ç—å - –º–æ–∂–Ω–æ –≤–∑–≤–µ—Å–∏—Ç—å.", "2x2":"–î–≤–∞–∂–¥—ã –¥–≤–∞ - —á–µ—Ç—ã—Ä–µ, —ç—Ç–æ –∑–Ω–∞—é—Ç –≤—Å–µ –Ω–∞ —Å–≤–µ—Ç–µ.", "2x3":"–î–≤–∞–∂–¥—ã —Ç—Ä–∏ - –±—É–¥–µ—Ç —à–µ—Å—Ç—å, –Ω–∞–¥–æ –∫–∞—à—É —á–∞—â–µ –µ—Å—Ç—å.","2x4":"–î–≤–∞–∂–¥—ã —á–µ—Ç—ã—Ä–µ - –≤–æ—Å–µ–º—å, –º—ã –≥—Ä–∏–±–æ—á–∫–∏ –≤ –∫—É–∑–æ–≤ –Ω–æ—Å–∏–º.","2x5":"–î–≤–∞–∂–¥—ã –ø—è—Ç—å - –¥–µ—Å—è—Ç—å, –ø—Ä–æ—Å—Ç–æ –Ω–æ–ª–∏–∫ –ø—Ä–∏–ø–∏—Å–∞—Ç—å.","2x6":"–î–≤–∞–∂–¥—ã —à–µ—Å—Ç—å - –¥–≤–µ–Ω–∞–¥—Ü–∞—Ç—å, –Ω–µ—á–µ–≥–æ —Ç—É—Ç —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è.","2x7":"–î–≤–∞–∂–¥—ã —Å–µ–º—å - —á–µ—Ç—ã—Ä–Ω–∞–¥—Ü–∞—Ç—å, –±—É–¥–µ–º —Å–ø–æ—Ä—Ç–æ–º –∑–∞–Ω–∏–º–∞—Ç—å—Å—è.","2x8":"–î–≤–∞–∂–¥—ã –≤–æ—Å–µ–º—å - —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç—å, –Ω—É–∂–Ω–æ —á–∞—â–µ —É–ª—ã–±–∞—Ç—å—Å—è.","2x9":"–î–≤–∞–∂–¥—ã –¥–µ–≤—è—Ç—å - –≤–æ—Å–µ–º–Ω–∞–¥—Ü–∞—Ç—å, –±—É–¥–µ–º –¥—Ä—É–∂–Ω–æ –º—ã —Å–º–µ—è—Ç—å—Å—è.","2x10": "–î–≤–∞ –Ω–∞ –¥–µ—Å—è—Ç—å - –¥–≤–∞–¥—Ü–∞—Ç—å, –±—É–¥–µ–º, –±—Ä–∞—Ç—Ü—ã, —É–º—ã–≤–∞—Ç—å—Å—è.", "3x3":"–¢—Ä–∏–∂–¥—ã —Ç—Ä–∏ - –¥–µ–≤—è—Ç—å, –≤ —á—É–¥–µ—Å–∞ –Ω–∞–¥–æ –≤–µ—Ä–∏—Ç—å.","3x4":"–¢—Ä–∏ –Ω–∞ —á–µ—Ç—ã—Ä–µ ‚Äì –¥–≤–µ–Ω–∞–¥—Ü–∞—Ç—å, –≥–æ–¥ –≥—É–ª—è–µ—Ç –ø–æ –ø–ª–∞–Ω–µ—Ç–µ.","3x5":"–¢—Ä–∏–∂–¥—ã –ø—è—Ç—å - –ø—è—Ç–Ω–∞–¥—Ü–∞—Ç—å, —á–∏—Å—Ç–æ –≤ –∫–æ–º–Ω–∞—Ç–µ –æ–ø—è—Ç—å.","3x6":"–¢—Ä–∏–∂–¥—ã —à–µ—Å—Ç—å - –≤–æ—Å–µ–º–Ω–∞–¥—Ü–∞—Ç—å, –∂–∞–ª—å, —á—Ç–æ –Ω–∞–º –Ω–µ –≤–æ—Å–µ–º–Ω–∞–¥—Ü–∞—Ç—å.","3x7":"–¢—Ä–∏–∂–¥—ã —Å–µ–º—å - –¥–≤–∞–¥—Ü–∞—Ç—å –æ–¥–∏–Ω, –ø–æ–±–µ–¥–∏–º, –≤–µ–¥—å –º—ã –æ–¥–Ω–∏.","3x8":"–¢—Ä–∏ –Ω–∞ –≤–æ—Å–µ–º—å - –¥–≤–∞–¥—Ü–∞—Ç—å —á–µ—Ç—ã—Ä–µ, –Ω–µ—Ç –º–µ–Ω—è —Å—á–∞—Å—Ç–ª–∏–≤–µ–π –≤ –º–∏—Ä–µ.","3x9":"–¢—Ä–∏–∂–¥—ã –¥–µ–≤—è—Ç—å - –¥–≤–∞–¥—Ü–∞—Ç—å —Å–µ–º—å, —ç—Ç–æ –ø–æ–º–Ω–∏—Ç—å –Ω—É–∂–Ω–æ –≤—Å–µ–º.","3x10": "–¢—Ä–∏ –Ω–∞ –¥–µ—Å—è—Ç—å - —Ç—Ä–∏–¥—Ü–∞—Ç—å, –Ω–∞–¥–æ –∫ —Å–æ–ª–Ω—Ü—É —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è.", "4x4":"–ß–µ—Ç—ã—Ä–µ –Ω–∞ —á–µ—Ç—ã—Ä–µ - –≤—Å–µ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç—å, –º—ã—à–∏ –≤ –¥–æ–º–µ —Å—Ç–∞–ª–∏ —Ç–∞–Ω—Ü–µ–≤–∞—Ç—å.","4x5":"–ß–µ—Ç—ã—Ä–µ–∂–¥—ã –ø—è—Ç—å - –¥–≤–∞–¥—Ü–∞—Ç—å, –±—É–¥–µ–º –º—ã—Ç—å—Å—è, —É–º—ã–≤–∞—Ç—å—Å—è.","4x6":"–®–µ—Å—Ç—å—é —á–µ—Ç—ã—Ä–µ - –¥–≤–∞–¥—Ü–∞—Ç—å —á–µ—Ç—ã—Ä–µ, —Ü–µ–ª—ã–π –¥–µ–Ω—å —Å–∏–∂—É –≤ –∫–≤–∞—Ä—Ç–∏—Ä–µ.","4x7":"–°–µ–º—å—é —á–µ—Ç—ã—Ä–µ - –¥–≤–∞–¥—Ü–∞—Ç—å –≤–æ—Å–µ–º—å, –º—ã –æ—Ç–≤–µ—Ç —É –æ—Å–µ–Ω–∏ –ø–æ–ø—Ä–æ—Å–∏–º.","4x8":"–ß–µ—Ç—ã—Ä–µ –Ω–∞ –≤–æ—Å–µ–º—å - —Ç—Ä–∏–¥—Ü–∞—Ç—å –¥–≤–∞, —É —Å–ª–æ–Ω–∞ –µ—Å—Ç—å –≥–æ–ª–æ–≤–∞.","4x9":"–ß–µ—Ç—ã—Ä–µ –Ω–∞ –¥–µ–≤—è—Ç—å - —Ç—Ä–∏–¥—Ü–∞—Ç—å —à–µ—Å—Ç—å, —É —Å—Ç–æ–ª–∞ —á–µ—Ç—ã—Ä–µ –Ω–æ–∂–∫–∏ –µ—Å—Ç—å.","4x10": "–ß–µ—Ç—ã—Ä–µ –Ω–∞ –¥–µ—Å—è—Ç—å - —Å–æ—Ä–æ–∫, –ø—É—Ç—å –∫ —É—Å–ø–µ—Ö—É –¥–æ–ª–æ–≥.", "5x5":"–ü—è—Ç—å—é –ø—è—Ç—å ‚Äì –¥–≤–∞–¥—Ü–∞—Ç—å –ø—è—Ç—å, –≤—ã—à–µ–ª –∑–∞–π—á–∏–∫ –ø–æ–≥—É–ª—è—Ç—å.","5x6":"–ü—è—Ç—å—é —à–µ—Å—Ç—å - —Ä–æ–≤–Ω–æ —Ç—Ä–∏–¥—Ü–∞—Ç—å, —ç—Ç–æ –Ω–∞–¥–æ –∑–Ω–∞—Ç—å –Ω–∞ '–ø—è—Ç—å'.","5x7":"–ü—è—Ç—å—é —Å–µ–º—å - —Ç—Ä–∏–¥—Ü–∞—Ç—å –ø—è—Ç—å, –∫–∞–∫ –ª–µ–≥–∫–æ —ç—Ç–æ —Å—á–∏—Ç–∞—Ç—å!","5x8":"–ü—è—Ç—å –Ω–∞ –≤–æ—Å–µ–º—å –±—É–¥–µ—Ç —Å–æ—Ä–æ–∫. –ö–æ–º–∞—Ä –ª–µ—Ç–µ–ª, –±—ã–ª –æ—á–µ–Ω—å –¥–æ—Ä–æ–≥.","5x9":"–ü—è—Ç—å—é –¥–µ–≤—è—Ç—å - —Å–æ—Ä–æ–∫ –ø—è—Ç—å, —Å–Ω–æ–≤–∞ —è –∏–¥—É –≥—É–ª—è—Ç—å.","5x10": "–ü—è—Ç—å –Ω–∞ –¥–µ—Å—è—Ç—å - –ø—è—Ç—å–¥–µ—Å—è—Ç, –∑–∞–π—á–∏–∫–∏ –±—ã—Å—Ç—Ä–æ —Å–∏–¥—è—Ç.", "6x6":"–®–µ—Å—Ç—å—é —à–µ—Å—Ç—å ‚Äì —Ç—Ä–∏–¥—Ü–∞—Ç—å —à–µ—Å—Ç—å, –≤—Å–µ–º –æ—Ö–æ—Ç–∞ –∫–∞—à—É –µ—Å—Ç—å!","6x7":"–®–µ—Å—Ç—å—é —Å–µ–º—å - —Å–æ—Ä–æ–∫ –¥–≤–∞, –Ω–∞ –ª—É–≥—É —Ä–∞—Å—Ç–µ—Ç —Ç—Ä–∞–≤–∞.","6x8":"–®–µ—Å—Ç—å –Ω–∞ –≤–æ—Å–µ–º—å - —Å–æ—Ä–æ–∫ –≤–æ—Å–µ–º—å, –Ω–æ—Å —É—Ç—Ä–µ–º –∏ –Ω–µ –ø–æ–ø—Ä–æ—Å–∏–º!","6x9":"–®–µ—Å—Ç—å—é –¥–µ–≤—è—Ç—å - –ø—è—Ç—å–¥–µ—Å—è—Ç —á–µ—Ç—ã—Ä–µ, –¥—ã—Ä–∫–∞ –≤ —Å—Ç–∞—Ä–æ–º-—Å—Ç–∞—Ä–æ–º —Å—ã—Ä–µ.","6x10": "–®–µ—Å—Ç—å –Ω–∞ –¥–µ—Å—è—Ç—å - —à–µ—Å—Ç—å–¥–µ—Å—è—Ç, –≥–æ—Ä–æ–¥–∞ –æ–≥–Ω–µ–º –≥–æ—Ä—è—Ç.", "7x7":"–°–µ–º—å—é —Å–µ–º—å - —Å–æ—Ä–æ–∫ –¥–µ–≤—è—Ç—å, –≤ –ª–µ—Å –æ—Ç–ø—Ä–∞–≤–∏–ª—Å—è –º–µ–¥–≤–µ–¥—å.","7x8":"–°–µ–º—å –Ω–∞ –≤–æ—Å–µ–º—å ‚Äì –ø—è—Ç—å–¥–µ—Å—è—Ç —à–µ—Å—Ç—å, —É –ø–∏—Ä–∞—Ç–æ–≤ —Å–∞–±–ª–∏ –µ—Å—Ç—å!","7x9":"–°–µ–º—å—é –¥–µ–≤—è—Ç—å - —à–µ—Å—Ç—å–¥–µ—Å—è—Ç —Ç—Ä–∏, –Ω–∞ –Ω–æ—Å—É —Å–≤–æ–π –Ω–æ—Å —É—Ç—Ä–∏.","7x10": "–°–µ–º—å –Ω–∞ –¥–µ—Å—è—Ç—å - —Å–µ–º—å–¥–µ—Å—è—Ç, –∂—É—Ä–∞–≤–ª–∏ –Ω–∞ —é–≥ –ª–µ—Ç—è—Ç.", "8x8":"–í–æ—Å–µ–º—å –Ω–∞ –≤–æ—Å–µ–º—å ‚Äì —à–µ—Å—Ç—å–¥–µ—Å—è—Ç —á–µ—Ç—ã—Ä–µ, –Ω–æ—Å —É –ë—É—Ä–∞—Ç–∏–Ω–æ –¥–ª–∏–Ω–Ω—ã–π-–¥–ª–∏–Ω–Ω—ã–π.","8x9":"–í–æ—Å–µ–º—å—é –¥–µ–≤—è—Ç—å - —Å–µ–º—å–¥–µ—Å—è—Ç –¥–≤–∞, —É –º–µ–Ω—è –±–æ–ª–∏—Ç —Å —É—Ç—Ä–∞ –≥–æ–ª–æ–≤–∞.","8x10": "–í–æ—Å–µ–º—å –Ω–∞ –¥–µ—Å—è—Ç—å - –≤–æ—Å–µ–º—å–¥–µ—Å—è—Ç, –ª–∏—Å—Ç—å—è —Å –≤–µ—Ç–æ–∫ –æ–±–ª–µ—Ç—è—Ç.", "9x9":"–î–µ–≤—è—Ç—å –Ω–∞ –¥–µ–≤—è—Ç—å ‚Äì –≤–æ—Å–µ–º—å–¥–µ—Å—è—Ç –æ–¥–∏–Ω, –≤ –º–∞–≥–∞–∑–∏–Ω–µ —è –æ–¥–∏–Ω.","9x10": "–î–µ–≤—è—Ç—å –Ω–∞ –¥–µ—Å—è—Ç—å - –¥–µ–≤—è–Ω–æ—Å—Ç–æ, —ç—Ç–æ –≤—ã—É—á–∏—Ç—å —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ.", "10x10": "–î–µ—Å—è—Ç—å –Ω–∞ –¥–µ—Å—è—Ç—å - –±—É–¥–µ—Ç —Å—Ç–æ, –≤ –ø–æ–ª–µ –≤—ã—Ä–æ—Å –∫—É—Å—Ç –≥—É—Å—Ç–æ–π." };
        const seasonsData = [ { name: "–î–µ–∫–∞–±—Ä—å", num: 12, season: "–ó–∏–º–∞", icon: "üéÑ", color: "#38bdf8", bg: "bg-sky-100" }, { name: "–Ø–Ω–≤–∞—Ä—å", num: 1, season: "–ó–∏–º–∞", icon: "‚ùÑÔ∏è", color: "#60a5fa", bg: "bg-sky-100" }, { name: "–§–µ–≤—Ä–∞–ª—å", num: 2, season: "–ó–∏–º–∞", icon: "‚õÑ", color: "#93c5fd", bg: "bg-sky-100" }, { name: "–ú–∞—Ä—Ç", num: 3, season: "–í–µ—Å–Ω–∞", icon: "üå±", color: "#4ade80", bg: "bg-green-100" }, { name: "–ê–ø—Ä–µ–ª—å", num: 4, season: "–í–µ—Å–Ω–∞", icon: "üíß", color: "#34d399", bg: "bg-green-100" }, { name: "–ú–∞–π", num: 5, season: "–í–µ—Å–Ω–∞", icon: "üå∏", color: "#a7f3d0", bg: "bg-green-100" }, { name: "–ò—é–Ω—å", num: 6, season: "–õ–µ—Ç–æ", icon: "‚òÄÔ∏è", color: "#facc15", bg: "bg-yellow-100" }, { name: "–ò—é–ª—å", num: 7, season: "–õ–µ—Ç–æ", icon: "üçì", color: "#fde047", bg: "bg-yellow-100" }, { name: "–ê–≤–≥—É—Å—Ç", num: 8, season: "–õ–µ—Ç–æ", icon: "ü¶ã", color: "#fef08a", bg: "bg-yellow-100" }, { name: "–°–µ–Ω—Ç—è–±—Ä—å", num: 9, season: "–û—Å–µ–Ω—å", icon: "üçÅ", color: "#fb923c", bg: "bg-orange-100" }, { name: "–û–∫—Ç—è–±—Ä—å", num: 10, season: "–û—Å–µ–Ω—å", icon: "üçÑ", color: "#fdba74", bg: "bg-orange-100" }, { name: "–ù–æ—è–±—Ä—å", num: 11, season: "–û—Å–µ–Ω—å", icon: "üçÇ", color: "#fed7aa", bg: "bg-orange-100" } ];
        const seasonRhymes = { "–ó–∏–º–∞": "–°–Ω–µ–≥ –ª–µ—Ç–∏—Ç, –º–æ—Ä–æ–∑ —Ç—Ä–µ—â–∏—Ç, —ç—Ç–æ –ó–∏–º—É—à–∫–∞ —Å–ø–µ—à–∏—Ç!", "–í–µ—Å–Ω–∞": "–†—É—á–µ–π–∫–∏ –±–µ–≥—É—Ç, –∑–≤–µ–Ω—è, –∫ –Ω–∞–º –ø—Ä–∏—à–ª–∞ –í–µ—Å–Ω–∞-–∫—Ä–∞—Å–Ω–∞!", "–õ–µ—Ç–æ": "–°–æ–ª–Ω—Ü–µ, —è–≥–æ–¥—ã, —Ü–≤–µ—Ç—ã, –õ–µ—Ç–æ ‚Äî —ç—Ç–æ —è –∏ —Ç—ã!", "–û—Å–µ–Ω—å": "–õ–∏—Å—Ç—å—è –ø–∞–¥–∞—é—Ç, —à—É—Ä—à–∞, –û—Å–µ–Ω—å –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–∞!" };
        const wordMagicData = [ { phrase: "–ü–æ–ª–æ–≤–∏–Ω–∞ —Ç—Ä–µ—Ç—å–µ–≥–æ", answer: "02:30" }, { phrase: "–ë–µ–∑ —á–µ—Ç–≤–µ—Ä—Ç–∏ —Å–µ–º—å", answer: "06:45" }, { phrase: "–ü—è—Ç–Ω–∞–¥—Ü–∞—Ç—å –º–∏–Ω—É—Ç –¥–µ—Å—è—Ç–æ–≥–æ", answer: "09:15" }, { phrase: "–†–æ–≤–Ω–æ –ø–æ–ª–¥–µ–Ω—å", answer: "12:00" }, { phrase: "–î–≤–∞–¥—Ü–∞—Ç—å –º–∏–Ω—É—Ç —à–µ—Å—Ç–æ–≥–æ", answer: "05:20" }, { phrase: "–ë–µ–∑ –¥–µ—Å—è—Ç–∏ –¥–≤–∞", answer: "01:50" } ];

        // --- MODE INITIALIZERS MAPPING ---
        const modeInitializers = {
            'cards': initCardsMode, 'visualizer': initVisualizerMode, 'pythagoras': initPythagorasMode, 'factors': initFactorsMode, 'sprint': initSprintMode, 'exam': initExamMode,
            'interactive-clock': initInteractiveClock, 'time-of-day': initTimeOfDay, 'seasons': initSeasons, 'what-time': initWhatTime, 'word-magic': initWordMagic
        };

        // --- INITIALIZERS LOGIC ---
        function initCardsMode(){
            const container=document.getElementById("cards-mode");
            container.innerHTML=`
                <h2 class="text-3xl font-bold text-center mb-4">–ö–∞—Ä—Ç–æ—á–∫–∏ —Å–æ —Å—Ç–∏—Ö–∞–º–∏</h2>
                ${!state.isPremium ? `
                <div class="bg-amber-100 border-2 border-amber-300 p-4 rounded-xl mb-6">
                    <p class="text-center text-amber-800 mb-2"><strong>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è:</strong> –î–æ—Å—Ç—É–ø–Ω—ã –∫–∞—Ä—Ç–æ—á–∫–∏ —Å —á–∏—Å–ª–∞–º–∏ –¥–æ 3!</p>
                    <div class="text-center">
                        <button onclick="purchasePremium()" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-bold">
                            –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é
                        </button>
                    </div>
                </div>` : ''}
                <div id="card-area" class="h-80 flex items-center justify-center"></div>
                <div class="flex justify-center mt-4">
                    <button id="next-card-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-full text-lg shadow-lg">–°–ª–µ–¥—É—é—â–∞—è</button>
                </div>`;
            
            const cardArea=container.querySelector("#card-area");
            const nextCardBtn=container.querySelector("#next-card-btn");
            
            function generateNewCard(){
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —á–∏—Å–µ–ª –¥–æ 3 –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
                const maxNum = state.isPremium ? 10 : 3;
                
                let num1=Math.floor(maxNum*Math.random())+1;
                let num2=Math.floor(maxNum*Math.random())+1;
                let answer=num1*num2;
                let rhymeKey=`${Math.min(num1,num2)}x${Math.max(num1,num2)}`;
                let association=rhymes[rhymeKey]||"–û—Ç–ª–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä!";
                
                cardArea.innerHTML=`<div id="interactive-card" class="card w-80 h-64 cursor-pointer">
                    <div class="card-inner">
                        <div class="card-face card-front">
                            <p class="text-6xl font-extrabold">${num1} x ${num2}</p>
                            <p class="mt-4 text-sm font-light">(–ù–∞–∂–º–∏)</p>
                        </div>
                        <div class="card-face card-back">
                            <p class="text-7xl font-extrabold">${answer}</p>
                            <p class="mt-2 text-center text-base px-2">${association}</p>
                        </div>
                    </div>
                </div>`;
                
                cardArea.querySelector("#interactive-card").addEventListener("click",(e=>e.currentTarget.classList.toggle("is-flipped")));
            }
            
            generateNewCard();
            nextCardBtn.onclick=generateNewCard;
        }
        function initVisualizerMode(){
            const container=document.getElementById("visualizer-mode");
            const maxNum = state.isPremium ? 10 : 3;
            
            container.innerHTML=`
                <h2 class="text-3xl font-bold text-center mb-4">–í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä</h2>
                ${!state.isPremium ? `
                <div class="bg-amber-100 border-2 border-amber-300 p-4 rounded-xl mb-6">
                    <p class="text-center text-amber-800 mb-2"><strong>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è:</strong> –î–æ—Å—Ç—É–ø–Ω—ã —á–∏—Å–ª–∞ —Ç–æ–ª—å–∫–æ –¥–æ 3!</p>
                    <div class="text-center">
                        <button onclick="purchasePremium()" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-bold">
                            –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é
                        </button>
                    </div>
                </div>` : ''}
                <div class="flex justify-center items-center space-x-4 mb-6">
                    <input type="number" id="v-num1" min="1" max="${maxNum}" value="${Math.min(3, maxNum)}" class="w-24 p-2 text-2xl text-center border-2 rounded-lg">
                    <span class="text-2xl font-bold">—Ö</span>
                    <input type="number" id="v-num2" min="1" max="${maxNum}" value="${Math.min(3, maxNum)}" class="w-24 p-2 text-2xl text-center border-2 rounded-lg">
                </div>
                <div id="visualizer-grid" class="mx-auto border p-2" style="width:fit-content;display:grid;gap:4px"></div>
                <p id="visualizer-result" class="text-center text-2xl font-bold mt-4"></p>`;
                
            const vNum1=container.querySelector("#v-num1");
            const vNum2=container.querySelector("#v-num2");
            const grid=container.querySelector("#visualizer-grid");
            const result=container.querySelector("#visualizer-result");
            
            function update(){
                let num1=parseInt(vNum1.value)||1;
                let num2=parseInt(vNum2.value)||1;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
                if(!state.isPremium) {
                    if(num1 > maxNum) {
                        num1 = maxNum;
                        vNum1.value = maxNum;
                    }
                    if(num2 > maxNum) {
                        num2 = maxNum;
                        vNum2.value = maxNum;
                    }
                }
                
                grid.innerHTML="";
                grid.style.gridTemplateColumns=`repeat(${num2}, 30px)`;
                
                for(let i=0; i<num1*num2; i++){
                    const cell=document.createElement("div");
                    cell.className="w-[30px] h-[30px] bg-green-400 rounded";
                    grid.appendChild(cell);
                }
                
                result.textContent=`${num1} x ${num2} = ${num1*num2}`;
            }
            
            vNum1.oninput=update;
            vNum2.oninput=update;
            update();
        }
        function initPythagorasMode(){
            const container=document.getElementById("pythagoras-mode");
            const maxNum = state.isPremium ? 10 : 3;
            
            container.innerHTML=`
                <h2 class="text-3xl font-bold text-center mb-2">–¢–∞–±–ª–∏—Ü–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞</h2>
                <p class="text-center text-gray-500 mb-4">–ù–∞–∂–º–∏ –Ω–∞ –ª—é–±–æ–µ —á–∏—Å–ª–æ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –æ–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è. <br> –û—Ç–≤–µ—Ç –±—É–¥–µ—Ç <span class="text-red-500 font-bold">–Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏</span>!</p>
                ${!state.isPremium ? `
                <div class="bg-amber-100 border-2 border-amber-300 p-4 rounded-xl mb-6">
                    <p class="text-center text-amber-800 mb-2"><strong>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è:</strong> –¢–∞–±–ª–∏—Ü–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–æ 3!</p>
                    <div class="text-center">
                        <button onclick="purchasePremium()" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-bold">
                            –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é
                        </button>
                    </div>
                </div>` : ''}
                <table id="pythagoras-table" class="mx-auto" style="border-collapse:collapse"></table>`;
                
            const table=container.querySelector("#pythagoras-table");
            const tbody=document.createElement("tbody");
            const header=document.createElement("tr");
            
            // –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç—É—é —è—á–µ–π–∫—É –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
            const th_empty = document.createElement("th");
            th_empty.className="w-10 h-10";
            header.appendChild(th_empty);
            
            // –°–æ–∑–¥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞–±–ª–∏—Ü—ã (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞)
            for(let i=1; i<=10; i++){
                const th=document.createElement("th");
                th.textContent=i;
                th.dataset.col=i;
                
                // –ï—Å–ª–∏ —á–∏—Å–ª–æ > maxNum –∏ –Ω–µ—Ç –ø—Ä–µ–º–∏—É–º–∞, –¥–µ–ª–∞–µ–º —è—á–µ–π–∫—É –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π
                if(i > maxNum && !state.isPremium) {
                    th.className="w-10 h-10 text-center border font-bold bg-gray-300 text-gray-500";
                    th.dataset.premium = "true";
                } else {
                    th.className="w-10 h-10 text-center border font-bold cursor-pointer bg-gray-100";
                }
                
                header.appendChild(th);
            }
            tbody.appendChild(header);
            
            // –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
            for(let i=1; i<=10; i++){
                const tr=document.createElement("tr");
                const th=document.createElement("th");
                
                th.textContent=i;
                th.dataset.row=i;
                
                // –ï—Å–ª–∏ —á–∏—Å–ª–æ > maxNum –∏ –Ω–µ—Ç –ø—Ä–µ–º–∏—É–º–∞, –¥–µ–ª–∞–µ–º —è—á–µ–π–∫—É –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π
                if(i > maxNum && !state.isPremium) {
                    th.className="w-10 h-10 text-center border font-bold bg-gray-300 text-gray-500";
                    th.dataset.premium = "true";
                } else {
                    th.className="w-10 h-10 text-center border font-bold cursor-pointer bg-gray-100";
                }
                
                tr.appendChild(th);
                
                // –°–æ–∑–¥–∞–µ–º —è—á–µ–π–∫–∏ —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
                for(let j=1; j<=10; j++){
                    const td=document.createElement("td");
                    td.textContent=j*i;
                    td.dataset.row=i;
                    td.dataset.col=j;
                    
                    // –ï—Å–ª–∏ —è—á–µ–π–∫–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ø—Ä–µ–º–∏—É–º-—á–∞—Å—Ç–∏
                    if((i > maxNum || j > maxNum) && !state.isPremium) {
                        td.className="w-10 h-10 text-center border bg-gray-300 text-gray-500";
                        td.dataset.premium = "true";
                    } else {
                        td.className="w-10 h-10 text-center border font-bold cursor-pointer";
                    }
                    
                    tr.appendChild(td);
                }
                tbody.appendChild(tr);
            }
            
            table.appendChild(tbody);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ —è—á–µ–π–∫–∏
            table.addEventListener("click", (e => {
                const target = e.target;
                
                // –ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –Ω–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—É—é —è—á–µ–π–∫—É –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–µ–º–∏—É–º
                if(target.dataset.premium === "true" && !state.isPremium) {
                    purchasePremium();
                    return;
                }
                
                // –î–ª—è –æ–±—ã—á–Ω—ã—Ö —è—á–µ–µ–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –∫–∞–∫ —Ä–∞–Ω—å—à–µ
                if("TD" !== target.tagName) return;
                
                table.querySelectorAll("td, th").forEach((e => {
                    e.style.backgroundColor = "";
                    e.style.color = "";
                }));
                
                const row = target.dataset.row;
                const col = target.dataset.col;
                
                table.querySelectorAll(`[data-row="${row}"]`).forEach((e => e.style.backgroundColor = "#93c5fd"));
                table.querySelectorAll(`[data-col="${col}"]`).forEach((e => e.style.backgroundColor = "#93c5fd"));
                
                target.style.backgroundColor = "#ef4444";
                target.style.color = "white";
            }));
        }
        function initFactorsMode(){
            const container=document.getElementById("factors-mode");
            
            container.innerHTML=`
                <h2 class="text-3xl font-bold text-center mb-4">–ù–∞–π–¥–∏ –º–Ω–æ–∂–∏—Ç–µ–ª–∏</h2>
                ${!state.isPremium ? `
                <div class="bg-amber-100 border-2 border-amber-300 p-4 rounded-xl mb-6">
                    <p class="text-center text-amber-800 mb-2"><strong>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è:</strong> –î–æ—Å—Ç—É–ø–Ω—ã –∑–∞–¥–∞–Ω–∏—è —Å —á–∏—Å–ª–∞–º–∏ –¥–æ 3!</p>
                    <div class="text-center">
                        <button onclick="purchasePremium()" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-bold">
                            –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é
                        </button>
                    </div>
                </div>` : ''}
                <div class="text-center bg-orange-100 p-8 rounded-2xl">
                    <p id="factors-question" class="text-8xl font-extrabold text-orange-600 mb-6"></p>
                    <div class="flex justify-center items-center space-x-4 mb-4">
                        <input type="number" id="factor-1" class="w-28 p-3 text-3xl text-center border-4 rounded-lg">
                        <span class="text-3xl font-bold">x</span>
                        <input type="number" id="factor-2" class="w-28 p-3 text-3xl text-center border-4 rounded-lg">
                    </div>
                    <button id="check-factors-btn" class="bg-orange-500 text-white font-bold py-3 px-8 rounded-full text-lg">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    <div id="factors-feedback" class="mt-4 text-2xl font-bold h-8"></div>
                </div>`;
                
            const qEl=container.querySelector("#factors-question");
            const f1El=container.querySelector("#factor-1");
            const f2El=container.querySelector("#factor-2");
            const btn=container.querySelector("#check-factors-btn");
            const fbEl=container.querySelector("#factors-feedback");
            
            let product=0;
            
            function nextQ(){
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —á–∏—Å–µ–ª –¥–æ 3 –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
                const maxNum = state.isPremium ? 10 : 3;
                
                const num1=Math.floor(maxNum*Math.random())+1;
                const num2=Math.floor(maxNum*Math.random())+1;
                
                product=num1*num2;
                qEl.textContent=product;
                f1El.value="";
                f2El.value="";
                fbEl.textContent="";
                f1El.focus();
            }
            
            function check(){
                fbEl.classList.remove("text-green-500","text-red-500");
                
                if(parseInt(f1El.value)*parseInt(f2El.value)===product){
                    fbEl.textContent="–ò–¥–µ–∞–ª—å–Ω–æ! üéâ";
                    fbEl.classList.add("text-green-500");
                    setTimeout(nextQ,1500);
                } else {
                    fbEl.textContent="–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ!";
                    fbEl.classList.add("text-red-500");
                }
            }
            
            btn.onclick=check;
            f2El.addEventListener("keyup",(e => {
                if("Enter"===e.key) check();
            }));
            
            nextQ();
        }
        function initSprintMode(){
            const container=document.getElementById("sprint-mode");
            
            container.innerHTML=`
                <h2 class="text-3xl font-bold text-center mb-1">–°–ø—Ä–∏–Ω—Ç!</h2>
                ${!state.isPremium ? `
                <div class="bg-amber-100 border-2 border-amber-300 p-4 rounded-xl mb-6">
                    <p class="text-center text-amber-800 mb-2"><strong>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è:</strong> –î–æ—Å—Ç—É–ø–Ω—ã —á–∏—Å–ª–∞ —Ç–æ–ª—å–∫–æ –¥–æ 3!</p>
                    <div class="text-center">
                        <button onclick="purchasePremium()" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-bold">
                            –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é
                        </button>
                    </div>
                </div>` : ''}
                <div id="sprint-intro">
                    <p class="text-center text-gray-600 mb-6">–î–∞–π –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –∑–∞ 60 —Å–µ–∫—É–Ω–¥!</p>
                    <div class="text-center">
                        <button id="start-sprint-btn" class="bg-yellow-500 text-white font-bold py-4 px-10 rounded-full text-xl">–ù–∞—á–∞—Ç—å!</button>
                    </div>
                </div>
                <div id="sprint-game" class="hidden text-center">
                    <div class="flex justify-around items-center mb-6 bg-gray-100 p-4 rounded-xl">
                        <div><span class="font-bold">–°—á–µ—Ç: </span><span id="sprint-score" class="text-2xl font-bold text-green-600">0</span></div>
                        <div><span class="font-bold">–í—Ä–µ–º—è: </span><span id="sprint-timer" class="text-2xl font-bold text-red-600">60</span></div>
                    </div>
                    <p id="sprint-question" class="text-6xl font-extrabold mb-6"></p>
                    <input type="number" id="sprint-answer" class="w-48 mx-auto p-3 text-4xl text-center border-4 rounded-lg">
                    <div id="sprint-feedback" class="mt-4 text-3xl font-bold h-10"></div>
                </div>`;
            
            const intro=container.querySelector("#sprint-intro");
            const game=container.querySelector("#sprint-game");
            const answerEl=container.querySelector("#sprint-answer");
            const scoreEl=container.querySelector("#sprint-score");
            const timerEl=container.querySelector("#sprint-timer");
            const questionEl=container.querySelector("#sprint-question");
            const feedbackEl=container.querySelector("#sprint-feedback");
            
            sprintState={
                score:0,
                timeLeft:60,
                currentAnswer:0,
                timerId:null
            };
            
            container.querySelector("#start-sprint-btn").onclick=()=>{
                sprintState.score=0;
                sprintState.timeLeft=60;
                scoreEl.textContent=sprintState.score;
                timerEl.textContent=sprintState.timeLeft;
                intro.classList.add("hidden");
                game.classList.remove("hidden");
                nextSprintQuestion();
                answerEl.focus();
                
                sprintState.timerId=setInterval(()=>{
                    sprintState.timeLeft--;
                    timerEl.textContent=sprintState.timeLeft;
                    if(sprintState.timeLeft<=0) endSprint();
                },1e3);
            };
            
            function nextSprintQuestion(){
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —á–∏—Å–µ–ª –¥–æ 3 –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
                const maxNum = state.isPremium ? 10 : 3;
                
                const num1=Math.floor(maxNum*Math.random())+1;
                const num2=Math.floor(maxNum*Math.random())+1;
                
                sprintState.currentAnswer=num1*num2;
                questionEl.textContent=`${num1} x ${num2}`;
                answerEl.value="";
            }
            
            function endSprint(){
                clearInterval(sprintState.timerId);
                game.classList.add("hidden");
                intro.classList.remove("hidden");
                feedbackEl.textContent="";
                alert(`–í—Ä–µ–º—è –≤—ã—à–ª–æ! –í–∞—à —Å—á–µ—Ç: ${sprintState.score}.`);
            }
            
            answerEl.addEventListener("keyup",(e=>{
                if(sprintState.timeLeft>0 && String(answerEl.value).length>=String(sprintState.currentAnswer).length) {
                    const userAnswer=parseInt(answerEl.value);
                    feedbackEl.classList.remove("text-green-500","text-red-500");
                    
                    if(userAnswer===sprintState.currentAnswer) {
                        sprintState.score++;
                        scoreEl.textContent=sprintState.score;
                        feedbackEl.textContent="–í–µ—Ä–Ω–æ! ‚ú®";
                        feedbackEl.classList.add("text-green-500");
                    } else {
                        feedbackEl.textContent=`–û—à–∏–±–∫–∞! –û—Ç–≤–µ—Ç: ${sprintState.currentAnswer}`;
                        feedbackEl.classList.add("text-red-500");
                    }
                    
                    setTimeout(()=>{
                        if(sprintState.timeLeft>0) {
                            nextSprintQuestion();
                            feedbackEl.textContent="";
                        }
                    },1e3);
                }
            }));
        }
        function initExamMode(){
            const container=document.getElementById("exam-mode");
            
            container.innerHTML=`
                <h2 class="text-3xl font-bold text-center mb-1">–§–∏–Ω–∞–ª—å–Ω—ã–π –≠–∫–∑–∞–º–µ–Ω</h2>
                ${!state.isPremium ? `
                <div class="bg-amber-100 border-2 border-amber-300 p-4 rounded-xl mb-6">
                    <p class="text-center text-amber-800 mb-2"><strong>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è:</strong> –î–æ—Å—Ç—É–ø–Ω—ã —á–∏—Å–ª–∞ —Ç–æ–ª—å–∫–æ –¥–æ 3!</p>
                    <div class="text-center">
                        <button onclick="purchasePremium()" class="bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg font-bold">
                            –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é
                        </button>
                    </div>
                </div>` : ''}
                <div id="exam-intro">
                    <p class="text-center text-gray-600 mb-6">–û—Ç–≤–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ 10 –≤–æ–ø—Ä–æ—Å–æ–≤!</p>
                    <div class="text-center">
                        <button id="start-exam-btn" class="bg-red-500 text-white font-bold py-4 px-10 rounded-full text-xl">–ù–∞—á–∞—Ç—å —ç–∫–∑–∞–º–µ–Ω</button>
                    </div>
                </div>
                <div id="exam-game" class="hidden text-center">
                    <p class="text-right font-bold mb-4">–í–æ–ø—Ä–æ—Å <span id="exam-q-current">1</span> –∏–∑ <span id="exam-q-total">10</span></p>
                    <div class="w-full bg-gray-200 rounded-full h-4 mb-6">
                        <div id="exam-progress-bar" class="bg-red-500 h-4 rounded-full" style="width:10%"></div>
                    </div>
                    <p id="exam-question" class="text-6xl font-extrabold mb-6"></p>
                    <input type="number" id="exam-answer" class="w-48 mx-auto p-3 text-4xl text-center border-4 rounded-lg">
                    <div id="exam-feedback" class="mt-4 text-3xl font-bold h-10"></div>
                </div>`;
            
            const intro=container.querySelector("#exam-intro");
            const game=container.querySelector("#exam-game");
            const answerEl=container.querySelector("#exam-answer");
            const qTotalEl=container.querySelector("#exam-q-total");
            const qCurrentEl=container.querySelector("#exam-q-current");
            const progress=container.querySelector("#exam-progress-bar");
            const questionEl=container.querySelector("#exam-question");
            const feedbackEl=container.querySelector("#exam-feedback");
            
            examState={
                questions:[],
                currentQIndex:0,
                correctAnswers:0,
                totalQuestions:10
            };
            
            container.querySelector("#start-exam-btn").onclick=function(){
                examState.questions=[];
                examState.currentQIndex=0;
                examState.correctAnswers=0;
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —á–∏—Å–µ–ª –¥–æ 3 –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
                const maxNum = state.isPremium ? 10 : 3;
                const allQuestions=new Set;
                
                while(allQuestions.size<examState.totalQuestions){
                    const num1=Math.floor(maxNum*Math.random())+1;
                    const num2=Math.floor(maxNum*Math.random())+1;
                    allQuestions.add(`${num1}x${num2}`);
                }
                
                examState.questions=Array.from(allQuestions).map((e=>{
                    const[t,n]=e.split("x").map(Number);
                    return{num1:t,num2:n,answer:t*n};
                }));
                
                qTotalEl.textContent=examState.totalQuestions;
                intro.classList.add("hidden");
                game.classList.remove("hidden");
                displayExamQuestion();
                answerEl.focus();
            };
            
            function displayExamQuestion(){
                if(examState.currentQIndex>=examState.totalQuestions) {
                    return void endExam();
                }
                
                const q=examState.questions[examState.currentQIndex];
                questionEl.textContent=`${q.num1} x ${q.num2}`;
                answerEl.value="";
                qCurrentEl.textContent=examState.currentQIndex+1;
                progress.style.width=`${(examState.currentQIndex+1)/examState.totalQuestions*100}%`;
            }
            
            function endExam(){
                game.classList.add("hidden");
                intro.classList.remove("hidden");
                
                let message=`–≠–∫–∑–∞–º–µ–Ω –æ–∫–æ–Ω—á–µ–Ω! ${examState.correctAnswers} –∏–∑ ${examState.totalQuestions}.`;
                message += examState.correctAnswers/examState.totalQuestions>=.8 ?
                    " üèÜ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –ú–∞—Å—Ç–µ—Ä!" :
                    " üëç –•–æ—Ä–æ—à–∞—è –ø–æ–ø—ã—Ç–∫–∞!";
                    
                alert(message);
            }
            
            answerEl.addEventListener("keyup",(e=>{
                if("Enter"===e.key) {
                    const userAnswer=parseInt(answerEl.value);
                    const currentQuestion=examState.questions[examState.currentQIndex];
                    feedbackEl.classList.remove("text-green-500","text-red-500");
                    
                    if(userAnswer===currentQuestion.answer) {
                        examState.correctAnswers++;
                        feedbackEl.textContent="–ü—Ä–∞–≤–∏–ª—å–Ω–æ!";
                        feedbackEl.classList.add("text-green-500");
                    } else {
                        feedbackEl.textContent=`–ù–µ–≤–µ—Ä–Ω–æ. –û—Ç–≤–µ—Ç: ${currentQuestion.answer}`;
                        feedbackEl.classList.add("text-red-500");
                    }
                    
                    answerEl.disabled=true;
                    
                    setTimeout(()=>{
                        examState.currentQIndex++;
                        feedbackEl.textContent="";
                        answerEl.disabled=false;
                        displayExamQuestion();
                        answerEl.focus();
                    },1500);
                }
            }));
        }
        function initInteractiveClock(){const container=document.getElementById("interactive-clock-mode");container.innerHTML=`<h2 class="text-3xl font-bold text-center mb-4">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ß–∞—Å—ã</h2><p class="text-center text-gray-500 mb-6">–î–≤–∏–≥–∞–π —Å—Ç—Ä–µ–ª–∫–∏ –º—ã—à–∫–æ–π!</p><div id="interactive-clock" class="clock cursor-pointer"><div class="hand hour-hand"></div><div class="hand minute-hand"></div><div class="center-dot"></div></div><div id="digital-clock" class="text-center text-5xl font-extrabold mt-6 bg-gray-800 text-white p-4 rounded-xl w-48 mx-auto">12:00</div>`;const hourHand=container.querySelector(".hour-hand"),minuteHand=container.querySelector(".minute-hand"),digitalClock=container.querySelector("#digital-clock"),clock=container.querySelector("#interactive-clock");function setTime(hours,minutes){const minuteDeg=6*minutes,hourDeg=30*hours+minutes/2;minuteHand.style.transform=`translateX(-50%) rotate(${minuteDeg}deg)`,hourHand.style.transform=`translateX(-50%) rotate(${hourDeg}deg)`,digitalClock.textContent=`${String(0===hours?12:hours).padStart(2,"0")}:${String(minutes).padStart(2,"0")}`}function updateFromEvent(e){const rect=clock.getBoundingClientRect(),x=e.clientX-rect.left-rect.width/2,y=e.clientY-rect.top-rect.height/2;let angle=180*Math.atan2(y,x)/Math.PI+90;angle<0&&(angle+=360);const minutes=Math.floor(angle/6),hours=Math.floor(angle/30);setTime(hours,minutes)}clock.addEventListener("mousemove",(e=>{1===e.buttons&&updateFromEvent(e)})),clock.addEventListener("click",updateFromEvent),setTime(12,0)}
        function initTimeOfDay(){const container=document.getElementById("time-of-day-mode");container.innerHTML=`<h2 class="text-3xl font-bold text-center mb-4">–í—Ä–µ–º—è –°—É—Ç–æ–∫</h2><div id="time-of-day-container" class="p-6 rounded-2xl text-white text-center shadow-lg transition-all duration-500"><div id="tod-clock-display" class="text-6xl font-extrabold" style="text-shadow:2px 2px 4px rgba(0,0,0,0.5)">12:00</div><div id="tod-24h-display" class="text-2xl font-bold" style="text-shadow:1px 1px 2px rgba(0,0,0,0.5)">(12:00)</div><div id="tod-label" class="text-3xl font-bold mt-4" style="text-shadow:2px 2px 4px rgba(0,0,0,0.5)">–ü–æ–ª–¥–µ–Ω—å ‚òÄÔ∏è</div></div><input type="range" min="0" max="1439" value="720" id="time-slider" class="w-full mt-6 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer">`;const slider=container.querySelector("#time-slider"),displayContainer=container.querySelector("#time-of-day-container"),clockDisplay=container.querySelector("#tod-clock-display"),display24h=container.querySelector("#tod-24h-display"),label=container.querySelector("#tod-label");function update(totalMinutes){const hours24=Math.floor(totalMinutes/60),minutes=totalMinutes%60,hours12=0===hours24%12?12:hours24%12;clockDisplay.textContent=`${String(hours12).padStart(2,"0")}:${String(minutes).padStart(2,"0")}`,display24h.textContent=`(${String(hours24).padStart(2,"0")}:${String(minutes).padStart(2,"0")})`,hours24>=5&&hours24<12?(displayContainer.style.background="linear-gradient(to top, #fcd34d, #fca5a5)",label.textContent="–£—Ç—Ä–æ üåÖ"):hours24>=12&&hours24<17?(displayContainer.style.background="linear-gradient(to top, #60a5fa, #38bdf8)",label.textContent="–î–µ–Ω—å ‚òÄÔ∏è"):hours24>=17&&hours24<22?(displayContainer.style.background="linear-gradient(to top, #fb923c, #f97316)",label.textContent="–í–µ—á–µ—Ä üåá"):(displayContainer.style.background="linear-gradient(to top, #1e3a8a, #312e81)",label.textContent="–ù–æ—á—å üåô")}slider.addEventListener("input",(e=>update(e.target.value))),update(720)}
        function initWhatTime(){const container=document.getElementById("what-time-mode");container.innerHTML=`<h2 class="text-3xl font-bold text-center mb-4">–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å?</h2><div id="what-time-clock" class="clock mb-6"><div class="hand hour-hand"></div><div class="hand minute-hand"></div><div class="center-dot"></div></div><div id="what-time-options" class="grid grid-cols-2 gap-4"></div><div id="what-time-feedback" class="text-center text-2xl font-bold h-8 mt-4"></div><div class="text-center mt-4"><button id="next-what-time" class="bg-cyan-600 text-white font-bold py-2 px-6 rounded-full">–°–ª–µ–¥—É—é—â–∏–π</button></div>`;const hourHand=container.querySelector(".hour-hand"),minuteHand=container.querySelector(".minute-hand"),optionsContainer=container.querySelector("#what-time-options"),feedbackEl=container.querySelector("#what-time-feedback");function generateQuestion(){feedbackEl.textContent="",optionsContainer.innerHTML="";const correctHour=Math.floor(12*Math.random()),correctMinute=5*Math.floor(12*Math.random());minuteHand.style.transform=`translateX(-50%) rotate(${6*correctMinute}deg)`,hourHand.style.transform=`translateX(-50%) rotate(${30*correctHour+correctMinute/2}deg)`;const options=new Set,correctAnswer=`${String(0===correctHour?12:correctHour).padStart(2,"0")}:${String(correctMinute).padStart(2,"0")}`;options.add(correctAnswer);for(;options.size<4;){const wrongHour=Math.floor(12*Math.random()),wrongMinute=5*Math.floor(12*Math.random());options.add(`${String(0===wrongHour?12:wrongHour).padStart(2,"0")}:${String(wrongMinute).padStart(2,"0")}`)}Array.from(options).sort((()=>.5-Math.random())).forEach((opt=>{const btn=document.createElement("button");btn.className="p-4 bg-cyan-500 text-white font-bold text-2xl rounded-lg hover:bg-cyan-600",btn.textContent=opt,btn.onclick=()=>{feedbackEl.classList.remove("text-green-500","text-red-500"),opt===correctAnswer?(feedbackEl.textContent="–ü—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ",feedbackEl.classList.add("text-green-500")):(feedbackEl.textContent=`–ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correctAnswer}`,feedbackEl.classList.add("text-red-500")),optionsContainer.querySelectorAll("button").forEach((e=>e.disabled=!0))},optionsContainer.appendChild(btn)}))}container.querySelector("#next-what-time").onclick=generateQuestion,generateQuestion()}
        function initWordMagic(){const container=document.getElementById("word-magic-mode");container.innerHTML=`<h2 class="text-3xl font-bold text-center mb-4">–ú–∞–≥–∏—è –°–ª–æ–≤</h2><div id="word-magic-learn"><h3 class="text-2xl font-bold text-center text-fuchsia-700 mb-4">–°–Ω–∞—á–∞–ª–∞ –≤—ã—É—á–∏–º –ø—Ä–∞–≤–∏–ª–∞!</h3><div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center"><div class="p-4 bg-fuchsia-50 rounded-lg"><p class="font-bold">–ü–æ–ª–æ–≤–∏–Ω–∞ —Ç—Ä–µ—Ç—å–µ–≥–æ</p><p class="text-gray-600">–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—Ä–æ—à–ª–æ –ø–æ–ª—á–∞—Å–∞ –ø–æ—Å–ª–µ –¥–≤—É—Ö.</p><p class="font-bold text-xl mt-2">02:30</p></div><div class="p-4 bg-fuchsia-50 rounded-lg"><p class="font-bold">–ë–µ–∑ —á–µ—Ç–≤–µ—Ä—Ç–∏ —Å–µ–º—å</p><p class="text-gray-600">–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –¥–æ —Å–µ–º–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç 15 –º–∏–Ω—É—Ç.</p><p class="font-bold text-xl mt-2">06:45</p></div><div class="p-4 bg-fuchsia-50 rounded-lg"><p class="font-bold">–ß–µ—Ç–≤–µ—Ä—Ç—å –ø—è—Ç–æ–≥–æ</p><p class="text-gray-600">–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—Ä–æ—à–ª–æ 15 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ —á–µ—Ç—ã—Ä–µ—Ö.</p><p class="font-bold text-xl mt-2">04:15</p></div></div><div class="text-center mt-6"><button id="start-magic-practice" class="bg-fuchsia-500 text-white font-bold py-3 px-8 rounded-full">–ù–∞—á–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É!</button></div></div><div id="word-magic-practice" class="hidden"><div class="bg-fuchsia-100 p-8 rounded-2xl text-center"><p class="text-3xl font-bold text-fuchsia-800 mb-6" id="word-magic-phrase">...</p><p class="text-gray-600 mb-2">–í–ø–∏—à–∏ –≤—Ä–µ–º—è:</p><div class="flex items-center justify-center space-x-2"><input type="number" id="word-magic-hour" class="w-24 p-3 text-4xl text-center border-4 rounded-lg" min="0" max="23"><span class="text-4xl font-bold">:</span><input type="number" id="word-magic-minute" class="w-24 p-3 text-4xl text-center border-4 rounded-lg" min="0" max="59"></div><div id="word-magic-feedback" class="mt-4 text-2xl font-bold h-8"></div><button id="check-word-magic" class="mt-4 bg-fuchsia-500 text-white font-bold py-3 px-8 rounded-full">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button></div></div>`;const learnView=container.querySelector("#word-magic-learn"),practiceView=container.querySelector("#word-magic-practice"),startBtn=container.querySelector("#start-magic-practice"),phraseEl=container.querySelector("#word-magic-phrase"),hourEl=container.querySelector("#word-magic-hour"),minuteEl=container.querySelector("#word-magic-minute"),feedbackEl=container.querySelector("#word-magic-feedback"),checkBtn=container.querySelector("#check-word-magic");let currentAnswer="";function generateQuestion(){const question=wordMagicData[Math.floor(Math.random()*wordMagicData.length)];phraseEl.textContent=question.phrase,currentAnswer=question.answer,hourEl.value="",minuteEl.value="",feedbackEl.textContent="",hourEl.disabled=!1,minuteEl.disabled=!1,hourEl.focus()}startBtn.onclick=()=>{learnView.classList.add("hidden"),practiceView.classList.remove("hidden"),generateQuestion()};hourEl.addEventListener("input",()=>{hourEl.value.length>=2&&minuteEl.focus()});function checkAnswer(){feedbackEl.classList.remove("text-green-500","text-red-500");const userAnswer=`${String(hourEl.value).padStart(2,"0")}:${String(minuteEl.value).padStart(2,"0")}`;userAnswer===currentAnswer?(feedbackEl.textContent="–û—Ç–ª–∏—á–Ω–æ! üëç",feedbackEl.classList.add("text-green-500"),hourEl.disabled=!0,minuteEl.disabled=!0,setTimeout(generateQuestion,1500)):(feedbackEl.textContent="–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ!",feedbackEl.classList.add("text-red-500"))}checkBtn.onclick=checkAnswer,minuteEl.addEventListener("keyup",(e=>{"Enter"===e.key&&checkAnswer()}))}
        function initSeasons(){const container=document.getElementById("seasons-mode");container.innerHTML=`<h2 class="text-3xl font-bold text-center mb-4">–í—Ä–µ–º–µ–Ω–∞ –ì–æ–¥–∞ –∏ –ú–µ—Å—è—Ü—ã</h2><div id="season-display" class="p-4 rounded-2xl transition-colors duration-500"><div class="flex flex-col md:flex-row items-center justify-around"><div class="season-wheel flex-shrink-0"></div><div id="season-info" class="text-center md:text-left md:ml-8 mt-4 md:mt-0"><p class="text-8xl" id="info-icon">üìÖ</p><p class="text-4xl font-bold" id="info-month">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</p><p class="text-2xl text-gray-600" id="info-season">–ù–∞–∂–º–∏ –Ω–∞ –º–µ—Å—è—Ü!</p><p class="italic text-gray-500 mt-2 h-12" id="info-rhyme"></p></div></div></div>`;const wheel=container.querySelector(".season-wheel"),display=container.querySelector("#season-display"),infoIcon=container.querySelector("#info-icon"),infoMonth=container.querySelector("#info-month"),infoSeason=container.querySelector("#info-season"),infoRhyme=container.querySelector("#info-rhyme"),radius=120;seasonsData.sort(((a,b)=>a.num-b.num>0?1:b.num-a.num>0?-1:0)).forEach(((monthData,i)=>{const angle=i/12*2*Math.PI-Math.PI/2,x=radius*Math.cos(angle)+120,y=radius*Math.sin(angle)+120,monthEl=document.createElement("div");monthEl.className="month text-white",monthEl.style.left=`${x}px`,monthEl.style.top=`${y}px`,monthEl.style.backgroundColor=monthData.color,monthEl.innerHTML=`<span class="text-3xl">${monthData.icon}</span><span class="absolute bottom-1.5 text-sm font-bold">${monthData.num}</span>`,monthEl.addEventListener("click",(()=>{display.classList.forEach((c=>{c.startsWith("bg-")&&display.classList.remove(c)})),display.classList.add(monthData.bg),infoIcon.textContent=monthData.icon,infoMonth.textContent=monthData.name,infoSeason.textContent=monthData.season,infoRhyme.textContent=seasonRhymes[monthData.season]})),wheel.appendChild(monthEl)})),display.classList.add("bg-gray-100")}
    </script>
</body>
</html>
